(this.webpackJsonppoll=this.webpackJsonppoll||[]).push([[0],{53:function(e,t,c){},54:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){},68:function(e,t,c){"use strict";c.r(t);var n=c(3),s=c(2),i=c.n(s),a=c(22),o=c.n(a),r=(c(53),c(12)),l=(c(54),c(30)),d=l.a.initializeApp({apiKey:"AIzaSyCltUUy9jLkYxiWGNKaHDoCp6vhyz5VLRQ",authDomain:"poll-app-2ddf3.firebaseapp.com",databaseURL:"https://poll-app-2ddf3.firebaseio.com",projectId:"poll-app-2ddf3",storageBucket:"poll-app-2ddf3.appspot.com",messagingSenderId:"1035340703316",appId:"1:1035340703316:web:b413d919d5a80cb4adefc1",measurementId:"G-EFJ865QDJ8"}).firestore(),j=l.a.auth(),u=new l.a.auth.GoogleAuthProvider;l.a.firestore().enablePersistence();var b=d,p=(c(59),c(17)),O=c(87),h=c(41),m=c.n(h),x=c(92);c(60),Object(O.a)((function(e){return{button:{margin:e.spacing(1)}}}));var g=function(){var e=Object(s.useState)(""),t=Object(r.a)(e,2),c=t[0],i=t[1];return Object(n.jsx)("div",{className:"form",children:Object(n.jsxs)("form",{className:"inside_form",children:[Object(n.jsx)("input",{className:"inp",value:c,onChange:function(e){return i(e.target.value)},placeholder:"Enter the trending Poll"}),Object(n.jsx)(x.a,{variant:"contained",color:"primary",startIcon:Object(n.jsx)(m.a,{}),type:"submit",onClick:function(e){var t;e.preventDefault(),b.collection("polls_list").add((t={topic:c,pos:0,neg:0,users_list:[]},Object(p.a)(t,"neg",0),Object(p.a)(t,"users_list",[]),t)),i("")},children:"Add Topic"})]})})},v=c(18),f=(c(66),c(89)),_=c(90),I=c(93),N=Object(s.createContext)(),w=function(e){var t=e.reducer,c=e.initialState,i=e.children;return Object(n.jsx)(N.Provider,{value:Object(s.useReducer)(t,c),children:i})},S=function(){return Object(s.useContext)(N)},C=c(94),y=c(42),k=c.n(y),B=c(43),F=c.n(B);var P=function(e){var t=S(),c=Object(r.a)(t,2),s=(c[0].canVote,c[1],sessionStorage.getItem("userId"));return Object(n.jsx)("div",{className:"topic_list",children:Object(n.jsx)(I.a,{className:"root",variant:"outlined",children:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.a,{children:Object(n.jsx)("div",{className:"middle",children:Object(n.jsx)("p",{children:e.topicc})})}),Object(n.jsxs)(_.a,{children:[Object(n.jsxs)("div",{className:"positiveBar",children:[Object(n.jsxs)("div",{id:"thumbUp",children:[Object(n.jsx)(k.a,{onClick:function(){if(!0===e.vote)return null;b.collection("polls_list").doc(e.id).update({pos:e.pos+1,users_list:[].concat(Object(v.a)(e.users_list),[s])})}}),e.pos]}),Object(n.jsx)(C.a,{id:"posBar",variant:"determinate",color:"primary",value:e.pos})]}),Object(n.jsxs)("div",{className:"negativeBar",children:[Object(n.jsxs)("div",{id:"thumbdown",children:[Object(n.jsx)(F.a,{onClick:function(){if(!0===e.vote)return null;b.collection("polls_list").doc(e.id).update({neg:e.neg-1,users_list:[].concat(Object(v.a)(e.users_list),[s])})}}),-e.neg]}),Object(n.jsx)(C.a,{id:"negBar",variant:"determinate",color:"secondary",value:-e.neg})]})]})]})})})},L=c(91),E=c(44),A=c.n(E),D=c(45),V=c.n(D),T=sessionStorage.getItem("userId"),U=function(e){var t=S(),c=Object(r.a)(t,2);c[0].canVote,c[1];return e.topic.users_list.includes(T)===e.vote?Object(n.jsx)(P,{topicc:e.topic.poll,pos:e.topic.pos,neg:e.topic.neg,id:e.topic.id,users_list:e.topic.users_list,vote:e.vote}):(console.log("Hello4"),null)},G=function(){sessionStorage.clear(),window.location.reload()};var R=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),c=t[0],i=t[1],a=Object(s.useState)(!1),o=Object(r.a)(a,2),l=o[0],d=o[1],j=S(),u=Object(r.a)(j,2);return u[0].user,u[1],Object(s.useEffect)((function(){b.collection("polls_list").onSnapshot((function(e){i(e.docs.map((function(e){return{id:e.id,poll:e.data().topic,pos:e.data().pos,neg:e.data().neg,users_list:e.data().users_list}})))}))}),[]),window.onclick=function(e){if(!e.target.matches(".dropbtn")){var t,c=document.getElementsByClassName("dropdown-content");for(t=0;t<c.length;t++){var n=c[t];n.classList.contains("show")&&n.classList.remove("show")}}},Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)("div",{children:Object(n.jsx)(x.a,{variant:"contained",color:"white",children:"New"})}),Object(n.jsx)("div",{children:Object(n.jsx)(x.a,{variant:"contained",color:"white",children:"Today"})}),Object(n.jsx)("div",{children:Object(n.jsxs)(x.a,{onClick:G,children:[Object(n.jsx)(A.a,{}),"Sign Out"]})})]}),Object(n.jsxs)(L.a,{container:!0,spacing:0,children:[Object(n.jsx)(L.a,{item:!0,xs:2,children:Object(n.jsxs)("div",{className:"dropdown",children:[Object(n.jsxs)("button",{onClick:function(){document.getElementById("myDropdown").classList.toggle("show")},className:"dropbtn",children:["  ",Object(n.jsx)(V.a,{}),"  Profile "]}),Object(n.jsxs)("div",{id:"myDropdown",className:"dropdown-content",children:[Object(n.jsx)("img",{src:sessionStorage.getItem("userPhoto"),alt:sessionStorage.getItem("userName")}),Object(n.jsxs)("p",{children:[" ",sessionStorage.getItem("userName")," "]}),Object(n.jsx)("br",{}),Object(n.jsxs)("p",{children:[" ",sessionStorage.getItem("userId")," "]}),Object(n.jsx)("br",{}),Object(n.jsx)("p",{id:"created_btn",onClick:function(){return d(!0)},children:" voted polls "}),Object(n.jsx)("p",{id:"created_btn",onClick:function(){return d(!1)},children:" New polls "}),Object(n.jsx)("br",{})]})]})}),Object(n.jsx)(L.a,{item:!0,xs:10,children:Object(n.jsx)("div",{className:"middle1",children:Object(n.jsx)(g,{})})})]}),Object(n.jsx)("div",{className:"lower",children:c.map((function(e){return Object(n.jsx)(U,{topic:e,vote:l})}))})]})},J=(c(67),c(20)),z="SET_USER",H=function(e,t){switch(t.type){case z:return Object(J.a)(Object(J.a)({},e),{},{user:t.user});case"cannotvote":return Object(J.a)(Object(J.a)({},e),{},{canVote:!1});case"canvote":return Object(J.a)(Object(J.a)({},e),{},{canVote:!0});default:return e}};var K=function(){var e=S(),t=Object(r.a)(e,2),c=(t[0],t[1]);return Object(n.jsx)("div",{className:"login",children:Object(n.jsxs)("div",{className:"login_container",children:[Object(n.jsx)("img",{src:"https://scontent-del1-1.xx.fbcdn.net/v/t1.0-9/19555018_460895997623222_1633186150588911699_n.png?_nc_cat=110&ccb=2&_nc_sid=dd9801&_nc_ohc=-2AOc5mVZf4AX-3HVwt&_nc_ht=scontent-del1-1.xx&oh=2ea557d8052c97108a2affe0c72483f5&oe=5FF7B8B4",alt:""}),Object(n.jsx)("h1",{children:" Sign in to Poll INDIA"}),Object(n.jsx)("p",{children:" Made with love by CodeChamps"}),Object(n.jsx)(x.a,{onClick:function(){j.signInWithPopup(u).then((function(e){console.log(e);e.credential.accessToken;sessionStorage.setItem("userId","".concat(e.user.email)),sessionStorage.setItem("userName","".concat(e.user.displayName)),sessionStorage.setItem("userPhoto","".concat(e.user.photoURL)),c({type:z,user:e.user})})).catch((function(e){alert(e.message)}))},children:"Sign in with GOOGLE"})]})})};var M=function(){var e=S(),t=Object(r.a)(e,2),c=(t[0].user,t[1],sessionStorage.getItem("userId"));return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(n.Fragment,{children:c?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"top",children:Object(n.jsx)(R,{})})}):Object(n.jsx)(K,{})})})},Q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,96)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;c(e),n(e),s(e),i(e),a(e)}))};o.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(w,{initialState:{user:null,canVote:null},reducer:H,children:Object(n.jsx)(M,{})})}),document.getElementById("root")),Q(console.log)}},[[68,1,2]]]);
//# sourceMappingURL=main.e2c90b54.chunk.js.map